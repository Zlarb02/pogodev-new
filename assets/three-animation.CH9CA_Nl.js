import{S as y,P as w,W as f,B as m,a as u,b as C,c as S,L as M,C as z,F as b,d as v}from"./three.Blpg8hqK.js";class g{container;scene;camera;renderer;particleSystem;lines=[];lineGeometry;lineMaterial;options;animationFrameId=null;resizeObserver;constructor(e){const a={containerId:e.containerId,particleCount:150,particleSize:.05,particleColor:"#2c9e5e",lineColor:"#34d8ac",lineOpacity:.15,rotationSpeedX:5e-4,rotationSpeedY:.001,connectionDistance:2};this.options={...a,...e};const c=document.getElementById(this.options.containerId);if(!c)throw new Error(`Container with id ${this.options.containerId} not found`);this.container=c,this.scene=new y,this.camera=new w(75,this.container.clientWidth/this.container.clientHeight,.1,1e3);const i=console.error;console.error=()=>{};try{this.renderer=new f({alpha:!0}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setClearColor(0,0),this.container.appendChild(this.renderer.domElement)}catch{this.renderer=null,console.error=i;return}console.error=i;const r=new m,s=new Float32Array(this.options.particleCount*3),o=new Float32Array(this.options.particleCount*3);for(let n=0;n<this.options.particleCount;n++){const t=n*3;s[t]=(Math.random()-.5)*10,s[t+1]=(Math.random()-.5)*10,s[t+2]=(Math.random()-.5)*10,o[t]=.5+Math.random()*.5,o[t+1]=.5+Math.random()*.5,o[t+2]=.5+Math.random()*.5}r.setAttribute("position",new u(s,3)),r.setAttribute("color",new u(o,3));const h=new C({size:this.options.particleSize,vertexColors:!0,transparent:!0,opacity:.7});this.particleSystem=new S(r,h),this.scene.add(this.particleSystem),this.lineGeometry=new m,this.lineMaterial=new M({color:new z(this.options.lineColor),transparent:!0,opacity:this.options.lineOpacity}),this.camera.position.z=5,this.resizeObserver=new ResizeObserver(()=>{this.handleResize()}),this.resizeObserver.observe(this.container)}start(){this.renderer&&this.animate()}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.resizeObserver.disconnect(),this.lines.forEach(e=>this.scene.remove(e)),this.scene.remove(this.particleSystem),this.renderer?.domElement&&this.container.removeChild(this.renderer.domElement)}animate=()=>{if(!this.renderer)return;this.animationFrameId=requestAnimationFrame(this.animate),this.particleSystem.rotation.x+=this.options.rotationSpeedX,this.particleSystem.rotation.y+=this.options.rotationSpeedY;const e=this.particleSystem.geometry.attributes.position.array,a=[];for(let i=0;i<this.options.particleCount;i++){const r=i*3,s=e[r],o=e[r+1],h=e[r+2];for(let n=i+1;n<this.options.particleCount;n++){const t=n*3,l=e[t],p=e[t+1],d=e[t+2];Math.sqrt(Math.pow(l-s,2)+Math.pow(p-o,2)+Math.pow(d-h,2))<this.options.connectionDistance&&(a.push(s,o,h),a.push(l,p,d))}}this.lineGeometry.setAttribute("position",new b(a,3)),this.lines.forEach(i=>this.scene.remove(i)),this.lines=[];const c=new v(this.lineGeometry,this.lineMaterial);this.scene.add(c),this.lines.push(c),this.renderer.render(this.scene,this.camera)};handleResize(){!this.container||!this.renderer||(this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight))}}export{g as ThreeAnimation};
