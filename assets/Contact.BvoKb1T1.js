import{r as n,j as e,a0 as L,a1 as I,a2 as V,a3 as J,a4 as U,a5 as Z,a6 as G,a7 as K,X as W,Q as H,a8 as Q,G as X,L as Y}from"./vendor.9QKwgSsk.js";import{c as w,B as ee}from"./index.dUDSLEoe.js";import{m as l,A as h,u as te}from"./framer.D4GUNJaP.js";const se=J,D=n.forwardRef(({className:s,...c},a)=>e.jsx(L,{ref:a,className:w("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...c}));D.displayName=L.displayName;const j=n.forwardRef(({className:s,...c},a)=>e.jsx(I,{ref:a,className:w("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...c}));j.displayName=I.displayName;const N=n.forwardRef(({className:s,...c},a)=>e.jsx(V,{ref:a,className:w("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...c}));N.displayName=V.displayName;const re="https://old-water-0fb4.pogoda-etienne.workers.dev";function ae(){const[s,c]=n.useState({name:"",contact:"",message:"",website:""}),[a,m]=n.useState({}),[u,d]=n.useState("idle"),[A,k]=n.useState({telegram:!1,ntfy:!1}),[p,v]=n.useState(!1),[x,y]=n.useState(!1),C=n.useRef(Date.now()),S=n.useRef(null),E=n.useRef(null);n.useEffect(()=>{const t=setTimeout(()=>v(!0),5e3);return()=>clearTimeout(t)},[]);const B=()=>{const t=localStorage.getItem("lastContactSubmit");return!(t&&Date.now()-parseInt(t,10)<6e4)},R=t=>{if(t.length<2||t.length>60)return"Indiquez votre nom (2–60 caractères).";if(!/^[a-zA-ZÀ-ÿ\s'-]+$/.test(t))return"Utilisez uniquement des lettres, espaces, apostrophes et tirets."},z=t=>{const r=t.trim();if(r.includes("@")){if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r))return"Indiquez un e-mail valide (ex: nom@domaine.fr)."}else{const o=r.replace(/[^\d]/g,"");if(o.length<8)return"Indiquez un numéro valide (au moins 8 chiffres).";if(o.length>15)return"Le numéro est trop long (max 15 chiffres)."}},T=t=>{const r=t.trim();if(r.length<10)return"Votre message est trop court (minimum 10 caractères).";if(r.length>2e3)return"Votre message est trop long (maximum 2000 caractères).";if([/(.)\1{10,}/i,/(viagra|casino|lottery|prize)/i].some(i=>i.test(r)))return"Ce message semble suspect. Veuillez reformuler."},f=t=>{const{name:r,value:o}=t.target;c(i=>({...i,[r]:o})),r==="name"?m(i=>({...i,name:R(o)})):r==="contact"?m(i=>({...i,contact:z(o)})):r==="message"&&m(i=>({...i,message:T(o)}))},O=()=>{const t={name:R(s.name),contact:z(s.contact),message:T(s.message)};return m(t),!Object.values(t).some(r=>r!==void 0)},P=t=>{if(t.preventDefault(),s.website!==""){console.log("Spam detected: honeypot");return}if(Date.now()-C.current<5e3){console.log("Spam detected: too fast");return}if(!B()){d("error");return}O()&&(y(!0),d("confirming"),setTimeout(()=>E.current?.focus(),100))},_=async(t,r,o)=>{try{return(await fetch(re,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,contact:r,message:o})})).ok}catch(i){return console.error("Erreur worker:",i),!1}},$=async()=>{y(!1),d("sending");try{await _(s.name,s.contact,s.message)?(d("success"),k({telegram:!0,ntfy:!0}),localStorage.setItem("lastContactSubmit",Date.now().toString())):d("error")}catch(t){console.error("Erreur lors de l'envoi:",t),d("error")}},b=()=>{y(!1),d("idle")};n.useEffect(()=>{const t=r=>{r.key==="Escape"&&x&&b()};if(x){document.addEventListener("keydown",t);const r=S.current;if(r){const o=r.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),i=o[0],M=o[o.length-1],F=g=>{g.key==="Tab"&&(g.shiftKey?document.activeElement===i&&(g.preventDefault(),M.focus()):document.activeElement===M&&(g.preventDefault(),i.focus()))};return document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F),document.removeEventListener("keydown",t)}}}return()=>document.removeEventListener("keydown",t)},[x]);const q=()=>{c({name:"",contact:"",message:"",website:""}),m({}),d("idle"),k({telegram:!1,ntfy:!1}),C.current=Date.now(),v(!1),setTimeout(()=>v(!0),5e3)};return u==="success"?e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-2xl p-6 md:p-8 text-center border border-green-200 dark:border-green-800",role:"alert","aria-live":"polite",children:[e.jsx(U,{className:"w-12 h-12 md:w-16 md:h-16 text-green-600 dark:text-green-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-foreground mb-2",children:"Merci !"}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground mb-2",children:"Message envoyé avec succès !"}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground mb-6",children:["Je reviens vers vous très rapidement sur ",e.jsx("span",{className:"font-semibold text-foreground",children:s.contact}),"."]}),e.jsx("button",{onClick:q,className:"px-6 py-3 bg-accent text-white rounded-xl hover:bg-accent/90 transition-colors font-medium text-sm md:text-base",children:"Envoyer un autre message"})]}):u==="partial-success"?e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-950/20 dark:to-yellow-950/20 rounded-2xl p-6 md:p-8 text-center border border-amber-200 dark:border-amber-800",role:"alert","aria-live":"polite",children:[e.jsx(Z,{className:"w-12 h-12 md:w-16 md:h-16 text-amber-600 dark:text-amber-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-foreground mb-2",children:"Message reçu !"}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground mb-2",children:["Votre message a été envoyé via ",A.telegram?"Telegram":"Ntfy","."]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-6",children:"(Un des services n'a pas pu être contacté, mais j'ai bien reçu votre message)"}),e.jsx("button",{onClick:q,className:"px-6 py-3 bg-accent text-white rounded-xl hover:bg-accent/90 transition-colors font-medium text-sm md:text-base",children:"Envoyer un autre message"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(l.form,{onSubmit:P,className:"bg-card rounded-2xl p-8 border border-border shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},"aria-label":"Formulaire de contact",children:[e.jsxs("div",{className:"hidden","aria-hidden":"true",children:[e.jsx("label",{children:"Site web"}),e.jsx("input",{type:"text",id:"website",name:"website",value:s.website,onChange:f,tabIndex:-1,autoComplete:"off"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground mb-2",children:["Nom ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:f,placeholder:"Votre nom",className:`w-full px-4 py-3 bg-background border rounded-xl text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 transition-all ${a.name?"border-red-500 focus:ring-red-500":"border-border focus:ring-accent focus:border-transparent"}`,required:!0,"aria-required":"true","aria-invalid":!!a.name,"aria-describedby":a.name?"name-error":void 0}),e.jsx(h,{children:a.name&&e.jsx(l.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},id:"name-error",className:"mt-2 text-sm text-red-600 dark:text-red-400",role:"alert","aria-live":"polite",children:a.name})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"contact",className:"block text-sm font-medium text-foreground mb-2",children:["Contact ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"contact",name:"contact",value:s.contact,onChange:f,placeholder:"E-mail ou téléphone",className:`w-full px-4 py-3 bg-background border rounded-xl text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 transition-all ${a.contact?"border-red-500 focus:ring-red-500":"border-border focus:ring-accent focus:border-transparent"}`,required:!0,"aria-required":"true","aria-invalid":!!a.contact,"aria-describedby":"contact-help contact-error"}),e.jsx("p",{id:"contact-help",className:"mt-2 text-sm text-muted-foreground",children:"Je vous recontacte à cette adresse/ce numéro."}),e.jsx(h,{children:a.contact&&e.jsx(l.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},id:"contact-error",className:"mt-2 text-sm text-red-600 dark:text-red-400",role:"alert","aria-live":"polite",children:a.contact})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"message",className:"block text-sm font-medium text-foreground mb-2",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:f,placeholder:"Votre message…",rows:6,className:`w-full px-4 py-3 bg-background border rounded-xl text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 transition-all resize-none ${a.message?"border-red-500 focus:ring-red-500":"border-border focus:ring-accent focus:border-transparent"}`,required:!0,"aria-required":"true","aria-invalid":!!a.message,"aria-describedby":a.message?"message-error message-count":"message-count"}),e.jsxs("div",{id:"message-count",className:"absolute bottom-3 right-3 text-xs text-muted-foreground",children:[s.message.length,"/2000"]})]}),e.jsx(h,{children:a.message&&e.jsx(l.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},id:"message-error",className:"mt-2 text-sm text-red-600 dark:text-red-400",role:"alert","aria-live":"polite",children:a.message})})]}),e.jsx("button",{type:"submit",disabled:!p||u==="sending",className:"w-full px-6 py-4 bg-accent text-white rounded-xl hover:bg-accent/90 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all font-semibold text-lg shadow-lg flex items-center justify-center gap-3","aria-label":p?"Envoyer le message":"Bouton disponible dans quelques secondes",children:u==="sending"?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-5 h-5 animate-spin"}),"Envoi en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-5 h-5"}),"Envoyer"]})}),!p&&e.jsx("p",{className:"mt-2 text-sm text-muted-foreground text-center",children:"Bouton disponible dans quelques secondes..."}),u==="error"&&e.jsxs(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-6 p-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-xl",role:"alert","aria-live":"polite",children:[e.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm font-medium mb-2",children:"❌ Envoi impossible pour le moment"}),e.jsxs("p",{className:"text-red-800 dark:text-red-200 text-sm",children:["Réessayez plus tard ou contactez-moi via"," ",e.jsx("a",{href:"https://linkedin.com/in/etiennepogoda",target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline font-semibold",children:"LinkedIn"})," ","ou"," ",e.jsx("a",{href:"mailto:contact@pogodev.com",className:"underline hover:no-underline font-semibold",children:"email direct"}),"."]})]})]}),e.jsx(h,{children:x&&e.jsxs(e.Fragment,{children:[e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-40",onClick:b,"aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs(l.div,{ref:S,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-md bg-card rounded-2xl p-5 sm:p-6 md:p-8 shadow-2xl border border-border max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:b,className:"absolute top-3 right-3 md:top-4 md:right-4 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Fermer",children:e.jsx(W,{className:"w-5 h-5 md:w-6 md:h-6"})}),e.jsx("h3",{id:"modal-title",className:"text-lg sm:text-xl md:text-2xl font-bold text-foreground mb-3 sm:mb-4 md:mb-6 pr-8",children:"Vérifiez vos infos"}),e.jsxs("div",{className:"space-y-2.5 sm:space-y-3 md:space-y-4 mb-3 sm:mb-4 md:mb-6",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Nom"}),e.jsx("p",{className:"text-sm sm:text-base text-foreground font-medium break-words overflow-wrap-anywhere",children:s.name})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Contact"}),e.jsx("p",{className:"text-sm sm:text-base text-foreground font-medium break-all overflow-wrap-anywhere",children:s.contact})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Message"}),e.jsxs("p",{className:"text-sm sm:text-base text-foreground break-words overflow-wrap-anywhere",children:[s.message.substring(0,150),s.message.length>150&&"..."]})]})]}),e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-foreground mb-3 sm:mb-4 md:mb-6 font-medium text-center",children:"Est-ce bien le bon moyen de vous joindre ?"}),e.jsxs("div",{className:"flex flex-col gap-2.5 sm:gap-3",children:[e.jsx("button",{onClick:$,className:"w-full px-4 sm:px-6 py-2.5 sm:py-3 bg-accent text-white rounded-xl hover:bg-accent/90 transition-colors font-medium text-sm sm:text-base order-1",children:"Confirmer l'envoi"}),e.jsx("button",{ref:E,onClick:b,className:"w-full px-4 sm:px-6 py-2.5 sm:py-3 bg-background border-2 border-border text-foreground rounded-xl hover:bg-background/80 transition-colors font-medium text-sm sm:text-base order-2",children:"Modifier"})]})]})})]})})]})}function le(){const s=n.useRef(null),c=te(s,{once:!0,amount:.1}),[a,m]=n.useState("form");return e.jsx("section",{id:"contact",ref:s,className:"py-20 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx(l.h2,{className:"text-2xl md:text-3xl font-bold text-center mb-8 text-foreground",initial:{opacity:0,y:20},animate:c?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.6},children:"Contact"}),e.jsx(l.div,{className:"flex justify-center mb-8",initial:{opacity:0,y:20},animate:c?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.6,delay:.2},children:e.jsx(ee,{asChild:!0,variant:"outline",size:"lg",className:"border-accent/40 text-foreground hover:bg-accent/10 hover:border-accent",children:e.jsxs("a",{href:"#tarifs",onClick:u=>{u.preventDefault(),document.getElementById("tarifs")?.scrollIntoView({behavior:"smooth"})},children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Tarifs et devis"]})})}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(se,{value:a,onValueChange:m,className:"w-full",children:[e.jsxs(D,{className:"grid w-full max-w-md mx-auto grid-cols-2 mb-8",children:[e.jsx(j,{value:"form",children:"Formulaire"}),e.jsx(j,{value:"direct",children:"Contact direct"})]}),e.jsx(N,{value:"form",className:"mt-8",children:e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsx(ae,{})})}),e.jsx(N,{value:"direct",className:"mt-8",children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsx("div",{className:"bg-gradient-to-br from-primary/5 to-accent/5 rounded-2xl p-8 text-center border border-primary/20",children:e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-foreground",children:"Prêt à démarrer ?"}),e.jsx("div",{className:"bg-accent/10 border-2 border-accent/30 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-foreground font-semibold text-lg mb-2",children:["Je privilégie les échanges simples et directs. ",e.jsx("br",{})," Un SMS suffit pour lancer la discussion."]})}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Envoyez-moi un message avec votre idée de projet."}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("a",{href:"sms:0771853328",className:"inline-flex items-center px-8 py-4 bg-accent text-white rounded-xl hover:bg-accent/90 transition-all transform hover:scale-105 font-semibold text-lg shadow-lg",children:[e.jsx(Q,{className:"w-5 h-5 mr-3"}),"07 71 85 33 28"]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Cliquez pour ouvrir votre application SMS depuis un téléphone."})]})}),e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Ou retrouvez-moi sur :"}),e.jsxs("div",{className:"flex justify-center space-x-6",children:[e.jsx("a",{href:"https://github.com/zlarb02",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-card rounded-full flex items-center justify-center text-muted-foreground hover:text-accent hover:bg-accent/10 transition-all transform hover:scale-110 shadow-sm","aria-label":"GitHub",children:e.jsx(X,{className:"h-5 w-5"})}),e.jsx("a",{href:"https://linkedin.com/in/etiennepogoda",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-card rounded-full flex items-center justify-center text-muted-foreground hover:text-accent hover:bg-accent/10 transition-all transform hover:scale-110 shadow-sm","aria-label":"LinkedIn",children:e.jsx(Y,{className:"h-5 w-5"})})]})]})]})})]})})]})})}export{le as Contact};
