import{S as e,P as t,W as i,B as n,a as r,b as s,c as o,L as a,C as h,F as c,d as l}from"./three.DE4gpXnN.js";class p{container;scene;camera;renderer;particleSystem;lines=[];lineGeometry;lineMaterial;options;animationFrameId=null;resizeObserver;constructor(c){const l={containerId:c.containerId,particleCount:150,particleSize:.05,particleColor:"#2c9e5e",lineColor:"#34d8ac",lineOpacity:.15,rotationSpeedX:5e-4,rotationSpeedY:.001,connectionDistance:2};this.options={...l,...c};const p=document.getElementById(this.options.containerId);if(!p)throw new Error(`Container with id ${this.options.containerId} not found`);this.container=p,this.scene=new e,this.camera=new t(75,this.container.clientWidth/this.container.clientHeight,.1,1e3);const d=console.error;console.error=()=>{};try{this.renderer=new i({alpha:!0}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setClearColor(0,0),this.container.appendChild(this.renderer.domElement)}catch(C){return this.renderer=null,void(console.error=d)}console.error=d;const m=new n,u=new Float32Array(3*this.options.particleCount),w=new Float32Array(3*this.options.particleCount);for(let e=0;e<this.options.particleCount;e++){const t=3*e;u[t]=10*(Math.random()-.5),u[t+1]=10*(Math.random()-.5),u[t+2]=10*(Math.random()-.5),w[t]=.5+.5*Math.random(),w[t+1]=.5+.5*Math.random(),w[t+2]=.5+.5*Math.random()}m.setAttribute("position",new r(u,3)),m.setAttribute("color",new r(w,3));const y=new s({size:this.options.particleSize,vertexColors:!0,transparent:!0,opacity:.7});this.particleSystem=new o(m,y),this.scene.add(this.particleSystem),this.lineGeometry=new n,this.lineMaterial=new a({color:new h(this.options.lineColor),transparent:!0,opacity:this.options.lineOpacity}),this.camera.position.z=5,this.resizeObserver=new ResizeObserver(()=>{this.handleResize()}),this.resizeObserver.observe(this.container)}start(){this.renderer&&this.animate()}stop(){null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.resizeObserver.disconnect(),this.lines.forEach(e=>this.scene.remove(e)),this.scene.remove(this.particleSystem),this.renderer?.domElement&&this.container.removeChild(this.renderer.domElement)}animate=()=>{if(!this.renderer)return;this.animationFrameId=requestAnimationFrame(this.animate),this.particleSystem.rotation.x+=this.options.rotationSpeedX,this.particleSystem.rotation.y+=this.options.rotationSpeedY;const e=this.particleSystem.geometry.attributes.position.array,t=[];for(let n=0;n<this.options.particleCount;n++){const i=3*n,r=e[i],s=e[i+1],o=e[i+2];for(let a=n+1;a<this.options.particleCount;a++){const i=3*a,n=e[i],h=e[i+1],c=e[i+2];Math.sqrt(Math.pow(n-r,2)+Math.pow(h-s,2)+Math.pow(c-o,2))<this.options.connectionDistance&&(t.push(r,s,o),t.push(n,h,c))}}this.lineGeometry.setAttribute("position",new c(t,3)),this.lines.forEach(e=>this.scene.remove(e)),this.lines=[];const i=new l(this.lineGeometry,this.lineMaterial);this.scene.add(i),this.lines.push(i),this.renderer.render(this.scene,this.camera)};handleResize(){this.container&&this.renderer&&(this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight))}}export{p as ThreeAnimation};
