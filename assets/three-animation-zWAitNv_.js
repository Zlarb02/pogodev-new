import{F as t,L as e,S as i,P as n,W as s,B as o,a as r,b as a,c as h,d as c,C as l}from"./three-De3IdrvV.js";class p{constructor(p){this.lines=[],this.animationFrameId=null,this.animate=()=>{this.animationFrameId=requestAnimationFrame(this.animate),this.particleSystem.rotation.x+=this.options.rotationSpeedX,this.particleSystem.rotation.y+=this.options.rotationSpeedY;const i=this.particleSystem.geometry.attributes.position.array,n=[];for(let t=0;t<this.options.particleCount;t++){const e=3*t,s=i[e],o=i[e+1],r=i[e+2];for(let a=t+1;a<this.options.particleCount;a++){const t=3*a,e=i[t],h=i[t+1],c=i[t+2];Math.sqrt(Math.pow(e-s,2)+Math.pow(h-o,2)+Math.pow(c-r,2))<this.options.connectionDistance&&(n.push(s,o,r),n.push(e,h,c))}}this.lineGeometry.setAttribute("position",new t(n,3)),this.lines.forEach(t=>this.scene.remove(t)),this.lines=[];const s=new e(this.lineGeometry,this.lineMaterial);this.scene.add(s),this.lines.push(s),this.renderer.render(this.scene,this.camera)};const d={containerId:p.containerId,particleCount:150,particleSize:.05,particleColor:"#2c9e5e",lineColor:"#34d8ac",lineOpacity:.15,rotationSpeedX:5e-4,rotationSpeedY:.001,connectionDistance:2};this.options={...d,...p};const m=document.getElementById(this.options.containerId);if(!m)throw new Error(`Container with id ${this.options.containerId} not found`);this.container=m,this.scene=new i,this.camera=new n(75,this.container.clientWidth/this.container.clientHeight,.1,1e3),this.renderer=new s({alpha:!0}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setClearColor(0,0),this.container.appendChild(this.renderer.domElement);const w=new o,u=new Float32Array(3*this.options.particleCount),y=new Float32Array(3*this.options.particleCount);for(let t=0;t<this.options.particleCount;t++){const e=3*t;u[e]=10*(Math.random()-.5),u[e+1]=10*(Math.random()-.5),u[e+2]=10*(Math.random()-.5),y[e]=.5+.5*Math.random(),y[e+1]=.5+.5*Math.random(),y[e+2]=.5+.5*Math.random()}w.setAttribute("position",new r(u,3)),w.setAttribute("color",new r(y,3));const C=new a({size:this.options.particleSize,vertexColors:!0,transparent:!0,opacity:.7});this.particleSystem=new h(w,C),this.scene.add(this.particleSystem),this.lineGeometry=new o,this.lineMaterial=new c({color:new l(this.options.lineColor),transparent:!0,opacity:this.options.lineOpacity}),this.camera.position.z=5,this.resizeObserver=new ResizeObserver(()=>{this.handleResize()}),this.resizeObserver.observe(this.container)}start(){this.animate()}stop(){null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.resizeObserver.disconnect(),this.lines.forEach(t=>this.scene.remove(t)),this.scene.remove(this.particleSystem),this.container.removeChild(this.renderer.domElement)}handleResize(){this.container&&(this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight))}}export{p as ThreeAnimation};
